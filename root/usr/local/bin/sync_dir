#!/bin/bash

# Function to monitor changes using find with -cmin and sync with rsync

monitor_changes() {
    while true; do
        echo "Monitoring..."
        if [ -z "$(find "$1" -type f -cmin -"$THRESHOLD_MINUTES")" ]; then
            echo "No files modified in the last $THRESHOLD_MINUTES minutes, executing."
            rsync -avm --include='*/' --include=*"$TRANSFER_FILE_TYPE" --exclude='*' --remove-source-files  "$1"/ "$2"
        fi
        sleep 30
    done
}

monitor_changes "$1" "$2" &
